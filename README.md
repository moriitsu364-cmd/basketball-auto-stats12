# ğŸ€ ãƒã‚¹ã‚±ãƒƒãƒˆãƒœãƒ¼ãƒ«çµ±è¨ˆã‚·ã‚¹ãƒ†ãƒ  - ä¿®æ­£ç‰ˆ

## ğŸ“ ã“ã®ä¿®æ­£ç‰ˆã«ã¤ã„ã¦

å…ƒã®ã‚³ãƒ¼ãƒ‰ã«å¯¾ã—ã¦ä»¥ä¸‹ã®æ”¹å–„ã‚’è¡Œã„ã¾ã—ãŸ:

### âœ¨ ä¸»ãªæ”¹å–„ç‚¹

1. **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®å¼·åŒ–**
   - ã™ã¹ã¦ã®ä¸»è¦ãªæ“ä½œã«try-exceptãƒ–ãƒ­ãƒƒã‚¯ã‚’è¿½åŠ 
   - ã‚ã‹ã‚Šã‚„ã™ã„ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
   - ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã®è¿½åŠ 

2. **ãƒ‘ã‚¹ç®¡ç†ã®æ”¹å–„**
   - ç›¸å¯¾ãƒ‘ã‚¹ã®å•é¡Œã‚’ä¿®æ­£
   - ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®è‡ªå‹•ä½œæˆ
   - ã‚¯ãƒ­ã‚¹ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ å¯¾å¿œ

3. **ãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®è¿½åŠ **
   - å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼
   - ä¸è¶³ã‚«ãƒ©ãƒ ã®è‡ªå‹•è£œå®Œ
   - ãƒ‡ãƒ¼ã‚¿å‹ã®ãƒã‚§ãƒƒã‚¯

4. **ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ã®è¿½åŠ **
   - ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°
   - ç”»åƒå‡¦ç†
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½
   - çµ±è¨ˆè¨ˆç®—

## ğŸš€ ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆ

### æ–¹æ³•1: è‡ªå‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆæ¨å¥¨ï¼‰

```bash
# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’å®Ÿè¡Œ
python setup.py
```

ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆãŒä»¥ä¸‹ã‚’è‡ªå‹•çš„ã«è¡Œã„ã¾ã™:
- å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
- ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ
- è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
- ä¿®æ­£ç‰ˆãƒ•ã‚¡ã‚¤ãƒ«ã®é©ç”¨

### æ–¹æ³•2: æ‰‹å‹•ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# 1. ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt

# 2. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’ä½œæˆ
mkdir -p data/images/players
mkdir -p data/images/staff

# 3. ä¿®æ­£ç‰ˆãƒ•ã‚¡ã‚¤ãƒ«ã‚’é©ç”¨ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰
cd src
cp database_fixed.py database.py
cp config_fixed.py config.py
cp app_fixed.py app.py

# 4. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚³ãƒ”ãƒ¼
cp .streamlit/secrets.toml.example .streamlit/secrets.toml

# 5. secrets.tomlã‚’ç·¨é›†ã—ã¦APIã‚­ãƒ¼ã‚’è¨­å®š
# ã‚¨ãƒ‡ã‚£ã‚¿ã§ .streamlit/secrets.toml ã‚’é–‹ã„ã¦ç·¨é›†ã—ã¦ãã ã•ã„
```

## âš™ï¸ è¨­å®š

### 1. Gemini APIã‚­ãƒ¼ã®è¨­å®š

`.streamlit/secrets.toml`ã‚’ç·¨é›†:

```toml
GEMINI_API_KEY = "your-actual-api-key-here"
```

Gemini APIã‚­ãƒ¼ã¯[Google AI Studio](https://makersuite.google.com/app/apikey)ã‹ã‚‰å–å¾—ã§ãã¾ã™ã€‚

### 2. ç®¡ç†è€…ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®è¨­å®šï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰: `tsukuba1872`

å¤‰æ›´ã™ã‚‹å ´åˆ:

```bash
# ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®ãƒãƒƒã‚·ãƒ¥ã‚’ç”Ÿæˆ
python -c "import hashlib; print(hashlib.sha256('your-password'.encode()).hexdigest())"
```

ç”Ÿæˆã•ã‚ŒãŸãƒãƒƒã‚·ãƒ¥ã‚’`.streamlit/secrets.toml`ã«è¨­å®š:

```toml
ADMIN_PASSWORD_HASH = "generated-hash-here"
```

## ğŸ¯ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èµ·å‹•

### é€šå¸¸èµ·å‹•

```bash
streamlit run src/app.py
```

### ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰èµ·å‹•

```bash
DEBUG=true streamlit run src/app.py
```

ãƒ–ãƒ©ã‚¦ã‚¶ã§ `http://localhost:8501` ã«ã‚¢ã‚¯ã‚»ã‚¹

## ğŸ“‚ ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
basketball-auto-stats12-fixed/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app.py                    # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªï¼ˆå…ƒã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰
â”‚   â”œâ”€â”€ app_fixed.py              # ãƒ¡ã‚¤ãƒ³ã‚¢ãƒ—ãƒªï¼ˆä¿®æ­£ç‰ˆï¼‰
â”‚   â”œâ”€â”€ database.py               # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆå…ƒã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰
â”‚   â”œâ”€â”€ database_fixed.py         # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆä¿®æ­£ç‰ˆï¼‰
â”‚   â”œâ”€â”€ config.py                 # è¨­å®šï¼ˆå…ƒã®ãƒãƒ¼ã‚¸ãƒ§ãƒ³ï¼‰
â”‚   â”œâ”€â”€ config_fixed.py           # è¨­å®šï¼ˆä¿®æ­£ç‰ˆï¼‰
â”‚   â”œâ”€â”€ utils.py                  # ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°ï¼ˆæ–°è¦ï¼‰
â”‚   â”œâ”€â”€ auth.py                   # èªè¨¼
â”‚   â”œâ”€â”€ ai.py                     # AIæ©Ÿèƒ½
â”‚   â”œâ”€â”€ stats.py                  # çµ±è¨ˆè¨ˆç®—
â”‚   â”œâ”€â”€ charts.py                 # ã‚°ãƒ©ãƒ•ç”Ÿæˆ
â”‚   â”œâ”€â”€ components.py             # UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”œâ”€â”€ styles.py                 # ã‚¹ã‚¿ã‚¤ãƒ«
â”‚   â””â”€â”€ pages/                    # ãƒšãƒ¼ã‚¸ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
â”‚       â”œâ”€â”€ season_stats.py       # ã‚·ãƒ¼ã‚ºãƒ³çµ±è¨ˆ
â”‚       â”œâ”€â”€ player_stats.py       # é¸æ‰‹çµ±è¨ˆ
â”‚       â”œâ”€â”€ game_stats.py         # è©¦åˆçµ±è¨ˆ
â”‚       â”œâ”€â”€ compare.py            # æ¯”è¼ƒ
â”‚       â”œâ”€â”€ team_info.py          # ãƒãƒ¼ãƒ æƒ…å ±
â”‚       â”œâ”€â”€ opponent_stats.py     # å¯¾æˆ¦ç›¸æ‰‹çµ±è¨ˆ
â”‚       â”œâ”€â”€ data_input.py         # ãƒ‡ãƒ¼ã‚¿å…¥åŠ›
â”‚       â””â”€â”€ admin_settings.py     # ç®¡ç†è€…è¨­å®š
â”œâ”€â”€ data/                         # ãƒ‡ãƒ¼ã‚¿ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª
â”‚   â”œâ”€â”€ images/
â”‚   â”‚   â”œâ”€â”€ players/              # é¸æ‰‹ç”»åƒ
â”‚   â”‚   â””â”€â”€ staff/                # ã‚¹ã‚¿ãƒƒãƒ•ç”»åƒ
â”‚   â”œâ”€â”€ basketball_stats.csv      # è©¦åˆçµ±è¨ˆãƒ‡ãƒ¼ã‚¿
â”‚   â”œâ”€â”€ team_info.csv             # ãƒãƒ¼ãƒ æƒ…å ±
â”‚   â””â”€â”€ opponent_stats.csv        # å¯¾æˆ¦ç›¸æ‰‹çµ±è¨ˆ
â”œâ”€â”€ .streamlit/
â”‚   â”œâ”€â”€ config.toml               # Streamlitè¨­å®š
â”‚   â”œâ”€â”€ secrets.toml              # ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆè¨­å®š
â”‚   â””â”€â”€ secrets.toml.example      # ã‚·ãƒ¼ã‚¯ãƒ¬ãƒƒãƒˆè¨­å®šä¾‹
â”œâ”€â”€ requirements.txt              # ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸
â”œâ”€â”€ setup.py                      # ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¹ã‚¯ãƒªãƒ—ãƒˆï¼ˆæ–°è¦ï¼‰
â”œâ”€â”€ FIX_DOCUMENTATION.md          # ä¿®æ­£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆæ–°è¦ï¼‰
â”œâ”€â”€ QUICKSTART.md                 # ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆï¼ˆå…ƒï¼‰
â””â”€â”€ README.md                     # ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«
```

## ğŸ”§ ä¿®æ­£ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã®ä½¿ã„æ–¹

### Option 1: ä¿®æ­£ç‰ˆã‚’ç›´æ¥ä½¿ç”¨

```python
# src/app.py ã®ä»£ã‚ã‚Šã«
streamlit run src/app_fixed.py
```

### Option 2: ä¿®æ­£ç‰ˆã‚’å…ƒã®ãƒ•ã‚¡ã‚¤ãƒ«ã«ä¸Šæ›¸ã

```bash
# ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆ
cp src/database.py src/database_backup.py
cp src/config.py src/config_backup.py
cp src/app.py src/app_backup.py

# ä¿®æ­£ç‰ˆã‚’ä¸Šæ›¸ã
cp src/database_fixed.py src/database.py
cp src/config_fixed.py src/config.py
cp src/app_fixed.py src/app.py

# é€šå¸¸é€šã‚Šèµ·å‹•
streamlit run src/app.py
```

## ğŸ“š ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- **FIX_DOCUMENTATION.md**: è©³ç´°ãªä¿®æ­£å†…å®¹ã¨APIèª¬æ˜
- **QUICKSTART.md**: ã‚¯ã‚¤ãƒƒã‚¯ã‚¹ã‚¿ãƒ¼ãƒˆã‚¬ã‚¤ãƒ‰ï¼ˆå…ƒï¼‰
- **README.md**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå…¨ä½“ã®èª¬æ˜ï¼ˆå…ƒï¼‰

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ã‚ˆãã‚ã‚‹å•é¡Œ

#### 1. ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„

```bash
# ä¾å­˜ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt --upgrade
```

#### 2. ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚‰ãªã„

```bash
# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å†ä½œæˆ
python -c "from pathlib import Path; Path('data/images/players').mkdir(parents=True, exist_ok=True); Path('data/images/staff').mkdir(parents=True, exist_ok=True)"
```

#### 3. ãƒ‡ãƒ¼ã‚¿ãŒè¡¨ç¤ºã•ã‚Œãªã„

```bash
# ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•
DEBUG=true streamlit run src/app.py
```

#### 4. APIã‚­ãƒ¼ã‚¨ãƒ©ãƒ¼

`.streamlit/secrets.toml`ã‚’ç¢ºèª:
- ãƒ•ã‚¡ã‚¤ãƒ«ãŒå­˜åœ¨ã™ã‚‹ã‹
- GEMINI_API_KEYãŒæ­£ã—ãè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹
- APIã‚­ãƒ¼ãŒæœ‰åŠ¹ã‹

## ğŸ†• æ–°æ©Ÿèƒ½

### ä¿®æ­£ç‰ˆã§è¿½åŠ ã•ã‚ŒãŸæ©Ÿèƒ½

1. **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹çµ±è¨ˆã®è¡¨ç¤º**
   - ã‚µã‚¤ãƒ‰ãƒãƒ¼ã«ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®çµ±è¨ˆæƒ…å ±ã‚’è¡¨ç¤º
   - ç·è©¦åˆæ•°ã€ç·é¸æ‰‹æ•°ãªã©ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã§ç¢ºèª

2. **è©³ç´°ãªã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**
   - ã‚¨ãƒ©ãƒ¼ã®åŸå› ãŒæ˜ç¢ºã«
   - è§£æ±ºæ–¹æ³•ã®ãƒ’ãƒ³ãƒˆè¡¨ç¤º

3. **ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰**
   - è©³ç´°ãªã‚¹ã‚¿ãƒƒã‚¯ãƒˆãƒ¬ãƒ¼ã‚¹ã®è¡¨ç¤º
   - é–‹ç™ºæ™‚ã®ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ãŒå®¹æ˜“ã«

4. **ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£é–¢æ•°**
   - ãƒ‡ãƒ¼ã‚¿ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
   - ç”»åƒã®å‡¦ç†
   - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½
   - çµ±è¨ˆè¨ˆç®—

## ğŸ“ ä½¿ç”¨ä¾‹

### ãƒ‡ãƒ¼ã‚¿ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

```python
from utils import validator

# é¸æ‰‹ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼
is_valid, message = validator.validate_player_stats(player_df)
if not is_valid:
    st.error(message)

# ãƒ‘ãƒ¼ã‚»ãƒ³ãƒ†ãƒ¼ã‚¸ã®ã‚¯ãƒªãƒ¼ãƒ‹ãƒ³ã‚°
clean_pct = validator.clean_percentage("50%")  # 0.5
```

### ç”»åƒå‡¦ç†

```python
from utils import image_handler

# ç”»åƒãƒ‘ã‚¹ã®å–å¾—
image_path = image_handler.get_image_path('player', 'å±±ç”°å¤ªéƒ')

# ç”»åƒã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
is_valid, message = image_handler.validate_image(uploaded_file)
```

### ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

```python
from utils import security

# ãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰ã®æ¤œè¨¼
is_valid = security.verify_password(input_password, stored_hash)

# ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã®ãƒã‚§ãƒƒã‚¯
is_timeout = security.check_session_timeout()
```

## ğŸ¤ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆ:

1. `FIX_DOCUMENTATION.md`ã‚’ç¢ºèª
2. ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰ã§èµ·å‹•ã—ã¦è©³ç´°ã‚’ç¢ºèª
3. ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨ç’°å¢ƒæƒ…å ±ã‚’å«ã‚ã¦Issueã‚’ä½œæˆ

## ğŸ“œ ãƒ©ã‚¤ã‚»ãƒ³ã‚¹

MIT License

---

**Happy Coding! ğŸ€**
